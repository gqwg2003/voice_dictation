<mah:MetroWindow 
    x:Class="VoiceDictation.UI.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:local="clr-namespace:VoiceDictation.UI.Views"
    mc:Ignorable="d"
    Title="Voice Dictation" Height="600" Width="800"
    WindowStartupLocation="CenterScreen"
    GlowBrush="{DynamicResource MahApps.Brushes.Accent}"
    BorderThickness="1"
    TitleCharacterCasing="Normal"
    TextOptions.TextFormattingMode="Display"
    TextOptions.TextRenderingMode="ClearType">
    
    <mah:MetroWindow.IconTemplate>
        <DataTemplate>
            <materialDesign:PackIcon Kind="Microphone" Width="20" Height="20" />
        </DataTemplate>
    </mah:MetroWindow.IconTemplate>
    
    <mah:MetroWindow.RightWindowCommands>
        <mah:WindowCommands>
            <Button Command="{Binding OpenSettingsCommand}" ToolTip="Настройки">
                <StackPanel Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="Settings" />
                    <TextBlock Margin="5,0,0,0" Text="Настройки" />
                </StackPanel>
            </Button>
        </mah:WindowCommands>
    </mah:MetroWindow.RightWindowCommands>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Toolbar -->
        <ToolBarTray Grid.Row="0" Background="{DynamicResource MaterialDesignPaper}">
            <ToolBar Style="{DynamicResource MaterialDesignToolBar}" ClipToBounds="False">
                <Button Command="{Binding StartRecognitionCommand}" ToolTip="Начать запись">
                    <materialDesign:PackIcon Kind="Microphone" />
                </Button>
                <Button Command="{Binding StopRecognitionCommand}" ToolTip="Остановить запись">
                    <materialDesign:PackIcon Kind="StopCircleOutline" />
                </Button>
                <Separator />
                <Button Command="{Binding LoadTextCommand}" ToolTip="Загрузить текст">
                    <materialDesign:PackIcon Kind="FolderOpen" />
                </Button>
                <Button Command="{Binding SaveTextCommand}" ToolTip="Сохранить текст">
                    <materialDesign:PackIcon Kind="ContentSave" />
                </Button>
                <Separator />
                <Button Command="{Binding ClearTextCommand}" ToolTip="Очистить">
                    <materialDesign:PackIcon Kind="Delete" />
                </Button>
                <Separator />
                <ComboBox ItemsSource="{Binding AvailableLanguages}"
                          SelectedItem="{Binding SelectedLanguage}"
                          DisplayMemberPath="DisplayName"
                          MinWidth="120"
                          materialDesign:HintAssist.Hint="Язык"/>
            </ToolBar>
        </ToolBarTray>
        
        <!-- Main text area -->
        <TextBox Grid.Row="1" 
                 Text="{Binding RecognizedText, UpdateSourceTrigger=PropertyChanged}" 
                 TextWrapping="Wrap" 
                 AcceptsReturn="True"
                 VerticalScrollBarVisibility="Auto"
                 materialDesign:TextFieldAssist.TextFieldCornerRadius="2"
                 Margin="10"/>
        
        <!-- Status area -->
        <materialDesign:Card Grid.Row="2" Margin="10,0,10,10" Padding="5">
            <StackPanel>
                <TextBlock Text="{Binding StatusMessage}" Margin="5"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <ProgressBar Grid.Column="0" Value="{Binding RecognitionProgress}" Margin="5"/>
                    <TextBlock Grid.Column="1" Text="{Binding RecordingTimeDisplay}" Margin="5,0,5,0"/>
                </Grid>
            </StackPanel>
        </materialDesign:Card>
        
        <!-- Hot key area -->
        <materialDesign:Card Grid.Row="3" Margin="10,0,10,10" Padding="5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Для начала записи: Ctrl+Shift+R" Margin="5"/>
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Command="{Binding OpenHelpCommand}" Style="{StaticResource MaterialDesignFlatButton}" Margin="5,0,5,0">
                        <materialDesign:PackIcon Kind="Help" />
                    </Button>
                </StackPanel>
            </Grid>
        </materialDesign:Card>
        
    </Grid>
</mah:MetroWindow> 